<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-07-07
 | Rendered using Hippo Forge Maven Skin 1.04.00 based on Apache Maven Fluido Skin
-->
<!--[if lt IE 7]><html id="ie6" xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en"><![endif]-->
<!--[if IE 7]><html id="ie7" xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en"><![endif]-->
<!--[if IE 8]><html id="ie8" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><![endif]-->
<!--[if IE 9]><html id="ie9" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><![endif]-->
<!--[if !IE]>--><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><!--<![endif]-->

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
                    <meta name="Date-Revision-yyyymmdd" content="20170707"/>
                <meta http-equiv="Content-Language" content="en"/>
        <title>Hippo CMS External Document Picker Base &#x2013; Example: JPA Picker (External Document Field Picker)</title>
    <link rel="stylesheet" href="../css/forge-maven-skin-syntaxhighlighter-1.04.00.min.css"/>
    <link rel="stylesheet" href="../css/forge-maven-skin-1.04.00.min.css"/>
    <link rel="stylesheet" href="../css/site.css"/>
    <link rel="stylesheet" href="../css/print.css" media="print"/>

        
    <script type="text/javascript" src="../js/forge-maven-skin-syntaxhighlighter-1.04.00.min.js"></script>
    <script type="text/javascript" src="../js/forge-maven-skin-1.04.00.min.js"></script>

    
            </head>
    <body>

        
        
        
                
        
        
    <a href="http://github.com/onehippo-forge/external-document-picker">
        <img style="position: absolute; top: 0; left: 0; border: 0; z-index: 10000;"
             src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png"
             alt="Fork me on GitHub">
    </a>
    
    
                        
    <div class="container-fluid">
        <div class="row-fluid">
            <div id="header">
                <div id="logo">
                    <a href="http://www.onehippo.com">
                        <img src="../images/hipposkin/hippo-logo.png" alt="Hippo Logo" />
                    </a>
                </div>

                <h1>
                                            Hippo CMS External Document Picker Base
                    
                </h1>
                <div class="clearfix"></div>
            </div>
        </div>

        <div class="row-fluid">
            <div id="breadcrumbs" class="clearfix">
                <ul class="breadcrumb">
                                
                                        
                            <li id="publishDate">Last Published: 2017-07-07</li>
                                                                                                                                                </ul>

                <div class="links">
                    <a href="https://www.onehippo.com">Onehippo.com</a>
                    <a href="https://www.onehippo.org">Onehippo.org</a>
                </div>
            </div>
        </div>



            
    <div class="row-fluid">
        <div id="leftColumn" class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                                        <li class="nav-header">Main</li>
                                                           
        <li>
    
                                                <a href="../index.html" title="Welcome">
                    <i class="none"></i>
                Welcome</a>
                    </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                       
        <li>
    
                                                <a href="../field/architecture.html" title="External Document Field Picker">
                    <i class="icon-chevron-down"></i>
                External Document Field Picker</a>
                                        <ul class="nav nav-list">
                                                          
        <li>
    
                                                <a href="../field/architecture.html" title="Architecture">
                    <i class="none"></i>
                Architecture</a>
                    </li>
                                                                            
        <li>
    
                                                <a href="../field/install.html" title="Installation">
                    <i class="none"></i>
                Installation</a>
                    </li>
                                                                            
        <li>
    
                                                <a href="../field/dev-howto-listview.html" title="Developer's How-to (Flat List View)">
                    <i class="none"></i>
                Developer's How-to (Flat List View)</a>
                    </li>
                                                                            
        <li>
    
                                                <a href="../field/dev-howto-treeview.html" title="Developer's How-to (Tree List View)">
                    <i class="none"></i>
                Developer's How-to (Tree List View)</a>
                    </li>
                                                                            
        <li class="active">
    
                        <a href="#"><i class="none"></i>Example: JPA Picker</a>
                </li>
                                                                            
        <li>
    
                                                <a href="../apidocs/index.html" title="Javadoc (latest)">
                    <i class="none"></i>
                Javadoc (latest)</a>
                    </li>
                                              </ul>
            </li>
                                                                                                                                                                                                                                                       
        <li>
    
                                                <a href="../richtext-ckeditor/architecture.html" title="External Link Picker in RichText Editor">
                    <i class="icon-chevron-down"></i>
                External Link Picker in RichText Editor</a>
                                        <ul class="nav nav-list">
                                                          
        <li>
    
                                                <a href="../richtext-ckeditor/architecture.html" title="Architecture">
                    <i class="none"></i>
                Architecture</a>
                    </li>
                                                                            
        <li>
    
                                                <a href="../richtext-ckeditor/install.html" title="Installation">
                    <i class="none"></i>
                Installation</a>
                    </li>
                                                                            
        <li>
    
                                                <a href="../richtext-ckeditor/dev-howto.html" title="Developer's How-to">
                    <i class="none"></i>
                Developer's How-to</a>
                    </li>
                                              </ul>
            </li>
                               
        <li>
    
                                                <a href="../release-notes.html" title="Release Notes">
                    <i class="none"></i>
                Release Notes</a>
                    </li>
                                                            <li class="nav-header">Autogenerated Docs</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
        <li>
    
                                                <a href="../project-info.html" title="Project Information">
                    <i class="icon-chevron-right"></i>
                Project Information</a>
                                </li>
                                                                                                                                                                                                                                                                                                                                                                       
        <li>
    
                                                <a href="../project-reports.html" title="Project Reports">
                    <i class="icon-chevron-right"></i>
                Project Reports</a>
                                </li>
                        </ul>

                
                <hr class="divider"/>

                <div id="poweredBy">
                                            <div class="clear"></div>
                                            <div class="clear"></div>
                                            <div class="clear"></div>
                                                <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png"/>
        </a>
                            </div>
            </div>
        </div>
    
        
        <div id="bodyColumn"  class="span9" >
                                
            <!-- Copyright 2014 Hippo

    Licensed under the Apache License, Version 2.0 (the  "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS"
    BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License. -->
  
    <div class="section">
<h2><a name="Example:_JPA_Picker_External_Document_Field_Picker"></a>Example: JPA Picker (External Document Field Picker)</h2>

      
<div class="section">
<h3><a name="Configuring_Field_in_Document_Template_a.k.a_namespace"></a>Configuring Field in Document Template (a.k.a 'namespace')</h3>
        
<p>
          In a namespace bootstrap XML file, you should add a custom field like the following example
          (an example with SimpleJPQLExternalDocumentServiceFacade executing JPQL queries against external database):
        </p>
        
<div class="brush: xml">
          
<div class="source"><pre class="prettyprint linenums">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;sv:node sv:name=&quot;newsdocument&quot; xmlns:sv=&quot;http://www.jcp.org/jcr/sv/1.0&quot;&gt;
  &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
    &lt;sv:value&gt;hipposysedit:templatetype&lt;/sv:value&gt;
  &lt;/sv:property&gt;

  &lt;!-- SNIP --&gt;

  &lt;sv:node sv:name=&quot;editor:templates&quot;&gt;
    &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
      &lt;sv:value&gt;editor:templateset&lt;/sv:value&gt;
    &lt;/sv:property&gt;
    &lt;sv:node sv:name=&quot;_default_&quot;&gt;
      &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
        &lt;sv:value&gt;frontend:plugincluster&lt;/sv:value&gt;
      &lt;/sv:property&gt;

      &lt;!-- SNIP --&gt;

      &lt;!--
        You should add something like the following for each External Document Picker field.
        Most part will be used without modification except of the plugin parameters.
      --&gt;

      &lt;sv:node sv:name=&quot;informantextdocselector&quot;&gt;
        &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
          &lt;sv:value&gt;frontend:plugin&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;caption&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;Informant&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;engine&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;${engine}&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;external.document.service.facade&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;org.onehippo.forge.exdocpicker.demo.jpa.field.SimpleJPQLExternalDocumentServiceFacade&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;initial.search.enabled&quot; sv:type=&quot;Boolean&quot;&gt;
          &lt;sv:value&gt;true&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.external.docs.field.name&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;exdocpickerbasedemo:informantids&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.item.description.prop&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;description&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.item.iconlink.prop&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;photo&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.item.id.prop&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;id&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.item.id.type.prop&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;long&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.item.search.query&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;SELECT i FROM Informant i WHERE i.id = :id&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.item.search.query.param&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;id&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.item.title.prop&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;name&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.persistence.unit&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;newsPU&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.term.search.query&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;SELECT i FROM Informant i&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;jpql.term.search.query.param&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value/&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;mode&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;${mode}&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;plugin.class&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;org.onehippo.forge.exdocpicker.impl.field.ExternalDocumentFieldSelectorPlugin&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;selection.mode&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;multiple&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;wicket.id&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;${cluster.id}.field&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:property sv:name=&quot;wicket.model&quot; sv:type=&quot;String&quot;&gt;
          &lt;sv:value&gt;${wicket.model}&lt;/sv:value&gt;
        &lt;/sv:property&gt;
        &lt;sv:node sv:name=&quot;cluster.options&quot;&gt;
          &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
            &lt;sv:value&gt;frontend:pluginconfig&lt;/sv:value&gt;
          &lt;/sv:property&gt;
        &lt;/sv:node&gt;
      &lt;/sv:node&gt;

      &lt;!-- SNIP --&gt;

    &lt;/sv:node&gt;
  &lt;/sv:node&gt;
&lt;/sv:node&gt;
          </pre></div>
        </div>
        
<p>
          See the following for a full example in the demo project:
          <a class="externalLink" href="https://github.com/onehippo-forge/external-document-picker/tree/master/demo/bootstrap/configuration/src/main/resources/namespaces/exdocpickerbase-demo/newsdocument.xml">
            https://github.com/onehippo-forge/external-document-picker/tree/master/demo/bootstrap/configuration/src/main/resources/namespaces/exdocpickerbase-demo/newsdocument.xml
          </a>
        </p>
        
      </div>

      
<div class="section">
<h3><a name="JPAJPQL_based_ExternalDocumentServiceFacade_implementation"></a>JPA/JPQL based ExternalDocumentServiceFacade implementation</h3>
        
<p>
          See an example JPA/JPQL based <tt>ExternalDocumentServiceFacade</tt> implementation code here:
          <a class="externalLink" href="https://github.com/onehippo-forge/external-document-picker/tree/master/demo/cms/src/main/java/org/onehippo/forge/exdocpicker/demo/jpa/field/SimpleJPQLExternalDocumentServiceFacade.java">
            https://github.com/onehippo-forge/external-document-picker/tree/master/demo/cms/src/main/java/org/onehippo/forge/exdocpicker/demo/jpa/field/SimpleJPQLExternalDocumentServiceFacade.java
          </a>
        </p>
      </div>

      
<div class="section">
<h3><a name="Plugin_Parameters"></a>Plugin Parameters</h3>
        
<p>
          You may configure the following plugin parameters in the field definition of your document template definition (a.k.a 'namespace').
        </p>
        
<table border="0" class="table table-striped">
          
<tr class="a">
            
<th>Parameter name</th>
            
<th>Description</th>
            
<th>Example value(s)</th>
            
<th>Default value(s)</th>
          </tr>
          
<tr class="b">
            
<td>caption</td>
            
<td>Field caption, used as field label and dialog title.</td>
            
<td>&quot;Informant&quot;</td>
            
<td>&quot;Related external documents&quot;</td>
          </tr>
          
<tr class="a">
            
<td>external.document.service.facade</td>
            
<td><tt>org.onehippo.forge.exdocpicker.api.ExternalDocumentServiceFacade</tt> implementation class FQN.</td>
            
<td>&quot;org.onehippo.forge.exdocpicker.demo.jpa.field.SimpleJPQLExternalDocumentServiceFacade&quot;</td>
            
<td></td>
          </tr>
          
<tr class="b">
            
<td>selection.mode</td>
            
<td>
              External document selection mode. Either 'single' or 'multiple'.
              If this is 'single', then users can select only one external document item in the UI.
              Otherwise, users can select multiple external document items.
            </td>
            
<td>
              &quot;single&quot; or
              <br />
              &quot;multiple&quot;
            </td>
            
<td>&quot;multiple&quot;</td>
          </tr>
          
<tr class="a">
            
<td>dialog.size</td>
            
<td>The size of the picker popup dialog.</td>
            
<td>&quot;width=600,height=400&quot;</td>
            
<td>&quot;width=835,height=650&quot;</td>
          </tr>
          
<tr class="b">
            
<td>initial.search.enabled</td>
            
<td>Flag whether the popup dialog box will search external documents initially when opening up.</td>
            
<td>true</td>
            
<td>false</td>
          </tr>
          
<tr class="a">
            
<td>initial.search.query</td>
            
<td>
              Search query string or search term when the initial search is made in the dialog box when opening up
              if <tt>initial.search.enabled</tt> is set to true.
              <br /><br />
              <i>Note: it's up to the <tt>ExternalDocumentServiceFacade</tt> implementation to determine how to deal with the search query argument.</i>
            </td>
            
<td>&quot;*&quot;</td>
            
<td>&quot;&quot;</td>
          </tr>
          
<tr class="b">
            
<td>page.size</td>
            
<td>The page size (item count per page) in the popup dialog.</td>
            
<td>10</td>
            
<td>5</td>
          </tr>
        </table>
      </div>

      
<div class="section">
<h3><a name="Plugin_Specific_Parameters_of_SimpleJPQLExternalDocumentServiceFacade"></a>Plugin Specific Parameters of SimpleJPQLExternalDocumentServiceFacade</h3>
        
<p>
          The following parameters are set for the <tt>SimpleJPQLExternalDocumentServiceFacade</tt> implementation
          additionally.
        </p>
        
<table border="0" class="table table-striped">
          
<tr class="a">
            
<th>Parameter name</th>
            
<th>Description</th>
            
<th>Example value(s)</th>
            
<th>Default value(s)</th>
          </tr>
          
<tr class="b">
            
<td>jpql.external.docs.field.name</td>
            
<td>The physical node property name to read from or store to when selection an external document.</td>
            
<td>exdocpickerbasedemo:informantids</td>
            
<td></td>
          </tr>
          
<tr class="a">
            
<td>jpql.persistence.unit</td>
            
<td>JPA persistence unit name defined in persistence-unit.xml</td>
            
<td>newsPU</td>
            
<td></td>
          </tr>
          
<tr class="b">
            
<td>jpql.term.search.query</td>
            
<td>
              JPQL full text search statement to find multiple external documents by a search term
              when user enters a search term and clicks on the search button in the picker dialog.
            </td>
            
<td>SELECT i FROM Informant i</td>
            
<td></td>
          </tr>
          
<tr class="a">
            
<td>jpql.term.search.query.param</td>
            
<td>
              If there is a named parameter in 'jpql.term.search.query' property, then you can specify the parameter name
              in this property.
              <br />
              For example, if 'jpql.term.search.query' is set to 'SELECT i FROM Informant i WHERE i.name = :name', then
              you can set this property to 'name'.
            </td>
            
<td></td>
            
<td></td>
          </tr>
          
<tr class="b">
            
<td>jpql.item.search.query</td>
            
<td>JPQL search query statement to find single external document by a parameter such as ID.</td>
            
<td>SELECT i FROM Informant i WHERE i.id = :id</td>
            
<td></td>
          </tr>
          
<tr class="a">
            
<td>jpql.item.search.query.param</td>
            
<td>
              If there is a named parameter in 'jpql.item.search.query.param' property, then you can specify the parameter name
              in this property.
              <br />
              For example, if 'jpql.item.search.query.param' is set to 'SELECT i FROM Informant i WHERE i.id = :id', then
              you can set this property to 'id'.
            </td>
            
<td>id</td>
            
<td></td>
          </tr>
          
<tr class="b">
            
<td>jpql.item.id.prop</td>
            
<td>
              The ID property name to retrieve after selecting a JPA POJO bean.
              <br />
              For example, if the JPQL query selects multiple <tt>Informant</tt> beans and user selects one from it, then
              the plugin will need to retrieve the ID property from the <tt>Informant</tt> bean instance.
              If this property is set to 'id' for instance, then the plugin will invoke <tt>Informant#getId()</tt> to retrieve
              the ID in the end.
            </td>
            
<td>id</td>
            
<td></td>
          </tr>
          
<tr class="a">
            
<td>jpql.item.id.type.prop</td>
            
<td>
              The type of the ID property of the JPA POJO bean. It must be 'int', 'long', 'float', 'double' or 'String'.
              This type information is used for the parameter when executing the JPQL query configured by 'jpql.item.search.query' property.
            </td>
            
<td>long</td>
            
<td></td>
          </tr>
          
<tr class="b">
            
<td>jpql.item.title.prop</td>
            
<td>
              The title property name to display in the picker dialog after selecting a JPA POJO bean.
              <br />
              For example, if the JPQL query selects multiple <tt>Informant</tt> beans and user selects one from it, then
              the plugin will need to retrieve the title property from the <tt>Informant</tt> bean instance.
              If this property is set to 'name' for instance, then the plugin will invoke <tt>Informant#getName()</tt> to retrieve
              the title in the end.
            </td>
            
<td>name</td>
            
<td></td>
          </tr>
          
<tr class="a">
            
<td>jpql.item.description.prop</td>
            
<td>
              The description property name to display in the picker dialog after selecting a JPA POJO bean.
              <br />
              For example, if the JPQL query selects multiple <tt>Informant</tt> beans and user selects one from it, then
              the plugin will need to retrieve the description property from the <tt>Informant</tt> bean instance.
              If this property is set to 'description' for instance, then the plugin will invoke <tt>Informant#getDescription()</tt> to retrieve
              the title in the end.
            </td>
            
<td>description</td>
            
<td></td>
          </tr>
          
<tr class="b">
            
<td>jpql.item.iconlink.prop</td>
            
<td>
              The icon URL link property name to display in the picker dialog after selecting a JPA POJO bean.
              <br />
              For example, if the JPQL query selects multiple <tt>Informant</tt> beans and user selects one from it, then
              the plugin will need to retrieve the icon URL link property from the <tt>Informant</tt> bean instance.
              If this property is set to 'photo' for instance, then the plugin will invoke <tt>Informant#getPhoto()</tt> to retrieve
              the icon URL link in the end.
            </td>
            
<td>photo</td>
            
<td></td>
          </tr>
        </table>
      </div>

    </div>
  

            </div>
        </div>
    </div>

    <hr/>

    <footer>
                <div class="container-fluid">
                <div class="row span12">Copyright &copy;                                                2017.
                        All Rights Reserved.            
                                        
            </div>

        
        
                </div>
    </footer>
</body>
</html>
